<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>守株待兔 - Chengyu Interactivo</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading-screen">
        <h2>Cargando experiencia del Chengyu 守株待兔...</h2>
    </div>

    <a-scene 
        id="main-scene"
        vr-mode-ui="enabled: true" 
        background="color: #87CEEB"
        renderer="antialias: true; colorManagement: true"
        embedded
        style="height: 100vh; width: 100vw;">

        <!-- Iluminación -->
        <a-light type="ambient" color="#404040" intensity="0.6"></a-light>
        <a-light type="directional" position="5 10 5" color="#ffffff" intensity="0.8"></a-light>

        <!-- Terreno base -->
        <a-plane position="0 0 0" rotation="-90 0 0" width="30" height="30" color="#8FBC8F"></a-plane>

        <!-- Montañas de fondo -->
        <a-triangle position="-15 3 -20" scale="8 8 1" color="#556B2F"></a-triangle>
        <a-triangle position="10 2.5 -18" scale="6 6 1" color="#6B8E23"></a-triangle>
        <a-triangle position="0 3.5 -25" scale="10 10 1" color="#808000"></a-triangle>

        <!-- Campo de cultivo -->
        <a-entity id="farm-area">
            <a-box position="-8 0.1 -3" width="10" height="0.2" depth="6" color="#8B4513"></a-box>
            <!-- Surcos -->
            <a-box position="-9 0.11 -2" width="0.3" height="0.05" depth="5" color="#654321"></a-box>
            <a-box position="-8 0.11 -2" width="0.3" height="0.05" depth="5" color="#654321"></a-box>
            <a-box position="-7 0.11 -2" width="0.3" height="0.05" depth="5" color="#654321"></a-box>
            <a-box position="-6 0.11 -2" width="0.3" height="0.05" depth="5" color="#654321"></a-box>
        </a-entity>

        <!-- Granjero -->
        <a-entity id="farmer" position="-8 0 -2">
            <!-- Cuerpo -->
            <a-cylinder position="0 1.2 0" radius="0.35" height="0.9" color="#8B4513"></a-cylinder>
            <!-- Cabeza -->
            <a-sphere position="0 1.8 0" radius="0.25" color="#D2B48C"></a-sphere>
            <!-- Sombrero -->
            <a-cone position="0 2.1 0" radius-bottom="0.4" radius-top="0.1" height="0.3" color="#8B4513"></a-cone>
            <!-- Brazos -->
            <a-cylinder position="-0.5 1.3 0" radius="0.08" height="0.4" color="#D2B48C" rotation="0 0 -30"></a-cylinder>
            <a-cylinder position="0.5 1.3 0" radius="0.08" height="0.4" color="#D2B48C" rotation="0 0 30"></a-cylinder>
            <!-- Piernas -->
            <a-cylinder position="-0.15 0.4 0" radius="0.1" height="0.8" color="#654321"></a-cylinder>
            <a-cylinder position="0.15 0.4 0" radius="0.1" height="0.8" color="#654321"></a-cylinder>
            <!-- Herramienta -->
            <a-cylinder id="tool" position="0.8 1.2 0" radius="0.05" height="1.5" color="#8B4513" rotation="0 0 45"></a-cylinder>
        </a-entity>

        <!-- Tocón del árbol -->
        <a-entity id="tree-stump" position="6 0 -2">
            <a-cylinder position="0 0.5 0" radius="0.8" height="1" color="#8B4513"></a-cylinder>
            <a-ring position="0 1.01 0" radius-inner="0.1" radius-outer="0.7" color="#654321" rotation="-90 0 0"></a-ring>
        </a-entity>

        <!-- Conejo vivo -->
        <a-entity id="rabbit" position="15 0.2 -2">
            <a-sphere position="0 0.3 0" radius="0.3" color="#FFFFFF" scale="1.2 0.8 1"></a-sphere>
            <a-sphere position="0.3 0.4 0" radius="0.2" color="#FFFFFF"></a-sphere>
            <!-- Orejas -->
            <a-sphere position="0.4 0.65 -0.1" radius="0.08" color="#FFFFFF" scale="0.5 2 0.5"></a-sphere>
            <a-sphere position="0.4 0.65 0.1" radius="0.08" color="#FFFFFF" scale="0.5 2 0.5"></a-sphere>
            <!-- Ojos -->
            <a-sphere position="0.45 0.45 -0.08" radius="0.02" color="#000000"></a-sphere>
            <a-sphere position="0.45 0.45 0.08" radius="0.02" color="#000000"></a-sphere>
            <!-- Cola -->
            <a-sphere position="-0.3 0.35 0" radius="0.08" color="#FFFFFF"></a-sphere>
        </a-entity>

        <!-- Conejo muerto (inicialmente oculto) -->
        <a-entity id="dead-rabbit" position="6.5 0.1 -2" visible="false">
            <a-sphere position="0 0.1 0" radius="0.3" color="#F5F5F5" scale="1.2 0.8 1" rotation="0 0 90"></a-sphere>
            <a-sphere position="0.3 0.15 0" radius="0.2" color="#F5F5F5" rotation="0 0 45"></a-sphere>
        </a-entity>

        <!-- Maleza (inicialmente oculta) -->
        <a-entity id="weeds" visible="false">
            <a-cone position="-9 0.3 -1.5" radius-bottom="0.1" height="0.4" color="#228B22"></a-cone>
            <a-cone position="-8 0.25 -0.8" radius-bottom="0.08" height="0.3" color="#32CD32"></a-cone>
            <a-cone position="-7 0.35 -2.2" radius-bottom="0.12" height="0.5" color="#228B22"></a-cone>
            <a-cone position="-6.5 0.3 -1.2" radius-bottom="0.09" height="0.4" color="#32CD32"></a-cone>
        </a-entity>

        <!-- Panel de historia -->
        <a-entity id="story-panel" position="0 3 -4">
            <!-- Fondo del panel -->
            <a-plane position="0 0 0" width="8" height="5" color="#FFFFFF" opacity="0.95"
                     material="side: double"></a-plane>
            
            <!-- Marco superior -->
            <a-plane position="0 2.2 0.01" width="7.5" height="0.3" color="#C41E3A"></a-plane>
            
            <!-- Título principal -->
            <a-text value="守株待兔" position="0 1.7 0.01" align="center" 
                    color="#C41E3A" width="12"></a-text>
            
            <!-- Subtítulo -->
            <a-text value="Shǒu Zhū Dài Tù" position="0 1.3 0.01" align="center" 
                    color="#666666" width="8"></a-text>
            
            <!-- Número de acto -->
            <a-text id="act-number" value="ACTO 1 DE 4" position="0 0.9 0.01" align="center" 
                    color="#2E8B57" width="6"></a-text>
            
            <!-- Texto principal de la historia -->
            <a-text id="story-content" 
                    value="Un granjero trabajaba diligentemente en sus campos cada día.&#10;Con esfuerzo constante mantenía prósperas sus tierras.&#10;&#10;Haz clic en CONTINUAR para avanzar en la historia." 
                    position="0 0.2 0.01" align="center" color="#2C2C2C" width="6"></a-text>
            
            <!-- Botón continuar -->
            <a-box id="continue-btn" position="0 -1.5 0.1" width="2" height="0.5" depth="0.1" 
                   color="#2E8B57" class="clickable">
                <a-text value="CONTINUAR" position="0 0 0.06" align="center" color="white" width="8"></a-text>
            </a-box>
            
            <!-- Botón reiniciar (inicialmente oculto) -->
            <a-box id="restart-btn" position="0 -1.5 0.1" width="2" height="0.5" depth="0.1" 
                   color="#C41E3A" visible="false" class="clickable">
                <a-text value="REINICIAR" position="0 0 0.06" align="center" color="white" width="8"></a-text>
            </a-box>
            
            <!-- Barra de progreso -->
            <a-plane position="0 -2 0.01" width="6" height="0.2" color="#E0E0E0">
                <a-plane id="progress-bar" position="-2.25 0 0.01" width="1.5" height="0.15" color="#2E8B57"></a-plane>
            </a-plane>
        </a-entity>

        <!-- Sistema de cámara -->
        <a-entity id="camera-rig" position="0 1.7 8">
            <a-camera look-controls="enabled: true; pointerLockEnabled: false; touchEnabled: true"
                     wasd-controls="enabled: true"
                     cursor="rayOrigin: mouse"
                     raycaster="objects: .clickable">
                <a-cursor position="0 0 -1"
                         geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                         material="color: white; shader: flat"
                         cursor="fuse: true; fuseTimeout: 1500"></a-cursor>
            </a-camera>
        </a-entity>
    </a-scene>

    <script src="app.js"></script>
</body>
</html>


